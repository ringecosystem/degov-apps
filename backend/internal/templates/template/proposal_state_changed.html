{{define "title"}} {{.Title}} {{end}}

{{define "header"}}
  {{$theme := "dark"}}
  {{if eq .DegovSiteConfig.EmailTheme "light"}}
    {{$theme = "light"}}
  {{end}}

  {{if eq $theme "dark"}}
  <style></style>
  {{else}}
  <style></style>
  {{end}}
{{end}}

{{define "content"}}
  {{$proposalDb := .Proposal.ProposalDb}}
  {{$proposalIndexer := .Proposal.ProposalIndexer}}
  {{$dao := .Dao}}
  {{$daoConfig := .DaoConfig}}
  {{$payload := .PayloadData}}
  {{$config := .DegovSiteConfig}}

  <p style="margin: 0 0 20px; font-size: 16px; line-height: 1.6;">
    Hello {{if .EnsName}}{{.EnsName}}{{else}}{{.UserAddress}}{{end}},
  </p>
  <p style="margin: 0 0 25px; font-size: 16px; line-height: 1.6;">
    The status of the proposal <strong>"{{$proposalDb.Title}}"</strong> you're following in {{$dao.Name}} has been updated.
  </p>

  <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="font-size: 15px; line-height: 1.7; margin-bottom: 25px;">
    <tr>
      <td style="padding: 6px 0; width: 110px; vertical-align: top;"><strong>Proposal:</strong></td>
      <td style="padding: 6px 0;"><a href="{{$proposalDb.ProposalLink}}" target="_blank" style="color: #55acee; text-decoration: underline;">{{$proposalDb.Title}}</a></td>
    </tr>
    <tr>
      <td style="padding: 6px 0; vertical-align: top;"><strong>Latest Status:</strong></td>
      <td style="padding: 6px 0;"><strong>{{$payload.new_state}}</strong></td>
    </tr>
  </table>

  <div class="divider" style="margin-top: 25px; margin-left: 0; margin-right: 0;"></div>

  <h3 style="margin: 30px 0 20px; font-size: 20px; font-weight: 600;">Quick Links</h3>
  <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
      <td style="padding-bottom: 12px;">
        <a href="{{$proposalDb.ProposalLink}}" target="_blank" style="display: inline-block; padding: 12px 25px; font-size: 16px; font-weight: 600; color: #ffffff; background-color: #55acee; border-radius: 8px; text-decoration: none;">
          View Proposal Details
        </a>
      </td>
    </tr>
    {{if and $proposalIndexer.TransactionHash $daoConfig.Chain.Explorers}}
    <tr>
      <td style="padding-top: 8px;">
         <a href="{{index $daoConfig.Chain.Explorers 0}}/tx/{{$proposalIndexer.TransactionHash}}" target="_blank" style="color: #55acee; text-decoration: underline; font-size: 15px;">View Transaction Details &rarr;</a>
      </td>
    </tr>
    {{end}}
  </table>

  <p style="margin: 30px 0 25px; font-size: 16px; line-height: 1.6;">
    Thank you for staying engaged with {{$dao.Name}} onchain governance!
  </p>

  <p style="margin: 0; font-size: 16px; line-height: 1.6;">
    Best regards,<br />
    The {{$config.Name}} Team
  </p>
{{end}}
